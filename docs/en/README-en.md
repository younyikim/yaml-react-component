# YAML React Component Generator

![Safari](https://github.com/user-attachments/assets/914be4b6-41fe-4e8c-9542-e86a083cb2c1)

Language : [Korean](https://github.com/younyikim/yaml-react-component/blob/main/README.md) | English

## Overview

The YAML React Component Generator is a command-line tool designed to simplify the process of generating React components from YAML configuration files. This tool parses complex YAML structures, infers TypeScript types based on the YAML file, and generates React components with appropriate props and states. It also implements a Pub/Sub event system for communication between components, supports dynamic component loading, and performs dependency analysis.

## Coding Challenge Submission

- React component code generated from the provided YAML example: [src/components](https://github.com/younyikim/yaml-react-component/tree/main/src/components)
- System Architecture and Key Decisions : [SYSTEM.md](https://github.com/younyikim/yaml-react-component/blob/main/docs/en/SYSTEM-en.md)

---

## Key Features

- **YAML Parser**
  - Parses YAML files defining component structures, props, states, and relationships to define the component structure.
- **React Component Generator**
  - Generates functional React components with TypeScript types based on YAML configuration.
- **Type Inference System**
  - Automatically infers TypeScript types from YAML configuration files to generate interfaces and type definitions.
- **Pub/Sub Event System**
  - Implements an event publishing and subscribing system for event-based communication between components.
- **Dependency Analyzer**
  - Implements topological sorting to analyze dependencies between components and determine optimal rendering order.
- **Dynamic Component Loading**
  - Handles lazy loading of components using `React.lazy()` and `Suspense` based on YAML configuration.

## Demo

[View Demo](https://github.com/user-attachments/assets/cd05108a-c711-49f2-bd47-7a1392529f36)

---

## Folder Structure

```bash
ðŸ“¦ react-yaml-component-generator/
â”œâ”€â”€ package.json             # Project configuration and scripts
â”œâ”€â”€ src/                     # Main source code directory
â”‚   â”œâ”€â”€ cli.ts               # CLI entry point
â”‚   â”œâ”€â”€ components/          # Directory for generated React components
â”‚   â”œâ”€â”€ config/              # YAML configuration files
â”‚   â”œâ”€â”€ generators/          # Functions for component and state generation
â”‚   â”œâ”€â”€ tests/               # Directory for test files
â”‚   â”œâ”€â”€ types/               # Type definition files
â”‚   â””â”€â”€ utils/               # Utility functions
â””â”€â”€ example/                 # Example project directory
    â””â”€â”€ src/                 # Example source code
        â””â”€â”€ components/      # Directory for React components generated by the example project
```

---

## Installation and Usage

###### 1. Installation

```bash
git clone https://github.com/younyikim/yaml-react-component.git
cd yaml-react-component
pnpm install
```

###### 2. Create YAML Configuration File

Create a `src/config` directory in your project and write your YAML configuration file.

Example YAML file: [sample-config.yaml](https://github.com/younyikim/yaml-react-component/blob/main/src/config/sample-config.yaml)

---

## Running the Project

There are two ways to run this project.

###### 1. Run the Project via Command Line

This project provides a CLI command named `$ gcpt` to generate React components based on the YAML file.

**Usage**

###### 1. Build the Project

```bash
pnpm build
```

###### 2. Install the Project Globally

```bash
npm i -g
```

###### 3. Run the gcpt Command

```bash
gcpt [options]
```

###### Options

- `-f, --file <path>` : Specifies the path to the YAML file. Default is ./src/config/sample-config.yaml.
- `-d, --outDir <path>` : Specifies the output directory for the generated components. Default is ./src/components.

#### 2. Run the Project in Development Mode

If you do not want to install globally, you can run the project directly within the project directory.

###### 1. Run the Project

```bash
pnpm dev
```

- The dev command runs the original TypeScript file (src/cli.ts) directly, so no build process is required.

---

## Example Project

An example project is provided to demonstrate the functionality of the YAML React Component Generator in a client environment.

Example Project : [View example](https://github.com/younyikim/yaml-react-component/tree/main/example)

###### 1. Install Dependencies

```bash
cd example
pnpm i
```

###### 2. Run the Command

```bash
gcpt [options]
```

- Running the command will generate components based on the default YAML file in the src/components directory.

###### 3. Use the Components

Import the generated <Dashboard> component into your App.tsx file to see the component in action.

```js
// App.tsx
import Dashboard from "../components/dashboard";

...

return (
  <Dashboard />
);
```

###### 4. Run the Example Project

```bash
pnpm dev
```

## Key Dependencies

This project relies on the following key dependencies:

- **[typescript](https://www.npmjs.com/package/typescript)**
- **[commander](https://www.npmjs.com/package/commander)**: A library to easily create CLI commands.
- **[fs-extra](https://www.npmjs.com/package/fs-extra)**: Utility library for file system operations in Node.js.
- **[jest](https://www.npmjs.com/package/jest)**: JavaScript testing framework.
- **[js-yaml](https://www.npmjs.com/package/js-yaml)**: Library for parsing and generating YAML files.
- **[tsc-alias](https://www.npmjs.com/package/tsc-alias)**: Tool for handling TypeScript path aliases during compilation.
- **[tsx](https://www.npmjs.com/package/tsx)**: Tool for running TypeScript and JSX/TSX files.
